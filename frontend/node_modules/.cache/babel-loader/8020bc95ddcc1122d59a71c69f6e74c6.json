{"ast":null,"code":"var _jsxFileName = \"/app/src/components/MessagesList/index.js\";\nimport React, { useState, useEffect, useReducer, useRef, useContext } from \"react\";\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport clsx from \"clsx\";\nimport { green } from \"@material-ui/core/colors\";\nimport { Button, CircularProgress, Divider, IconButton, makeStyles } from \"@material-ui/core\";\nimport { AccessTime, Block, Done, DoneAll, ExpandMore, GetApp } from \"@material-ui/icons\";\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\nimport LocationPreview from \"../LocationPreview\";\nimport whatsBackgroundDark from \"../../assets/wa-background-dark.png\"; //DARK MODE PLW DESIGN//\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\nconst useStyles = makeStyles(theme => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    width: \"100%\",\n    minWidth: 300,\n    minHeight: 200\n  },\n  messagesList: {\n    backgroundImage: theme.mode === 'light' ? `url(${whatsBackground})` : `url(${whatsBackgroundDark})`,\n    //DARK MODE PLW DESIGN//\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 20px 20px\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  },\n  circleLoading: {\n    color: green[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12\n  },\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#ffffff\",\n    color: \"#303030\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: \"#f0f0f0\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\"\n  },\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\"\n  },\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#6bcbef\"\n  },\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0\n    },\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#dcf8c6\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: \"#cfe9ba\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\"\n  },\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\"\n  },\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\"\n  },\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": {\n      backgroundColor: \"inherit\"\n    }\n  },\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500\n  },\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\"\n  },\n  textContentItemEdited: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 120px 6px 6px\"\n  },\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\"\n  },\n  messageMedia: {\n    objectFit: \"cover\",\n    width: 250,\n    height: 200,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8\n  },\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\"\n  },\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\"\n  },\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\"\n  },\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4\n  },\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4\n  },\n  ackDoneAllIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4\n  },\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10\n  }\n}));\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n    messages.forEach(message => {\n      const messageIndex = state.findIndex(m => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n    return [...newMessages, ...state];\n  }\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex(m => m.id === newMessage.id);\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex(m => m.id === messageToUpdate.id);\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n    return [...state];\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\nconst MessagesList = ({\n  ticket,\n  ticketId,\n  isGroup\n}) => {\n  const classes = useStyles();\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const lastMessageRef = useRef();\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const currentTicketId = useRef(ticketId);\n  const socketManager = useContext(SocketContext);\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n    currentTicketId.current = ticketId;\n  }, [ticketId]);\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        if (ticketId === undefined) return;\n        try {\n          const {\n            data\n          } = await api.get(\"/messages/\" + ticketId, {\n            params: {\n              pageNumber\n            }\n          });\n          if (currentTicketId.current === ticketId) {\n            dispatch({\n              type: \"LOAD_MESSAGES\",\n              payload: data.messages\n            });\n            setHasMore(data.hasMore);\n            setLoading(false);\n          }\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId]);\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n    socket.on(\"ready\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\n    socket.on(`company-${companyId}-appMessage`, data => {\n      if (data.action === \"create\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({\n          type: \"ADD_MESSAGE\",\n          payload: data.message\n        });\n        scrollToBottom();\n      }\n      if (data.action === \"update\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({\n          type: \"UPDATE_MESSAGE\",\n          payload: data.message\n        });\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [ticketId, ticket, socketManager]);\n  const loadMore = () => {\n    setPageNumber(prevPageNumber => prevPageNumber + 1);\n  };\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({});\n    }\n  };\n  const handleScroll = e => {\n    if (!hasMore) return;\n    const {\n      scrollTop\n    } = e.currentTarget;\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n    if (loading) {\n      return;\n    }\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n  const handleCloseMessageOptionsMenu = e => {\n    setAnchorEl(null);\n  };\n  const checkMessageMedia = message => {\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\n      let locationParts = message.body.split('|');\n      let imageLocation = locationParts[0];\n      let linkLocation = locationParts[1];\n      let descriptionLocation = null;\n      if (locationParts.length > 2) descriptionLocation = message.body.split('|')[2];\n      return /*#__PURE__*/React.createElement(LocationPreview, {\n        image: imageLocation,\n        link: linkLocation,\n        description: descriptionLocation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 14\n        }\n      });\n    }\n    /* else if (message.mediaType === \"vcard\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\n    } */\n    /*else if (message.mediaType === \"multi_vcard\") {\n      console.log(\"multi_vcard\")\n      console.log(message)\n    \t\n      if(message.body !== null && message.body !== \"\") {\n        let newBody = JSON.parse(message.body)\n        return (\n          <>\n            {\n            newBody.map(v => (\n              <VcardPreview contact={v.name} numbers={v.number} />\n            ))\n            }\n          </>\n        )\n      } else return (<></>)\n    }*/else if (message.mediaType === \"image\") {\n      return /*#__PURE__*/React.createElement(ModalImageCors, {\n        imageUrl: message.mediaUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 14\n        }\n      });\n    } else if (message.mediaType === \"audio\") {\n      return /*#__PURE__*/React.createElement(\"audio\", {\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"source\", {\n        src: message.mediaUrl,\n        type: \"audio/ogg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }\n      }));\n    } else if (message.mediaType === \"video\") {\n      return /*#__PURE__*/React.createElement(\"video\", {\n        className: classes.messageMedia,\n        src: message.mediaUrl,\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 9\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.downloadMedia,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        startIcon: /*#__PURE__*/React.createElement(GetApp, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 26\n          }\n        }),\n        color: \"primary\",\n        variant: \"outlined\",\n        target: \"_blank\",\n        href: message.mediaUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }\n      }, \"Download\")), /*#__PURE__*/React.createElement(Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 11\n        }\n      }));\n    }\n  };\n  const renderMessageAck = message => {\n    if (message.ack === 1) {\n      return /*#__PURE__*/React.createElement(AccessTime, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 14\n        }\n      });\n    }\n    if (message.ack === 2) {\n      return /*#__PURE__*/React.createElement(Done, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 14\n        }\n      });\n    }\n    if (message.ack === 3) {\n      return /*#__PURE__*/React.createElement(DoneAll, {\n        fontSize: \"small\",\n        className: classes.ackIcons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 14\n        }\n      });\n    }\n    if (message.ack === 4 || message.ack === 5) {\n      return /*#__PURE__*/React.createElement(DoneAll, {\n        fontSize: \"small\",\n        className: classes.ackDoneAllIcon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n  const renderDailyTimestamps = (message, index) => {\n    if (index === 0) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.dailyTimestamp,\n        key: `timestamp-${message.id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.dailyTimestampText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }\n      }, format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")));\n    }\n    if (index < messagesList.length - 1) {\n      let messageDay = parseISO(messagesList[index].createdAt);\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n      if (!isSameDay(messageDay, previousMessageDay)) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: classes.dailyTimestamp,\n          key: `timestamp-${message.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.dailyTimestampText,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 13\n          }\n        }, format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")));\n      }\n    }\n    if (index === messagesList.length - 1) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: `ref-${message.createdAt}`,\n        ref: lastMessageRef,\n        style: {\n          float: \"left\",\n          clear: \"both\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 9\n        }\n      });\n    }\n  };\n  const renderNumberTicket = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      var _message$ticket, _message$ticket$whats;\n      let messageTicket = message.ticketId;\n      let connectionName = (_message$ticket = message.ticket) === null || _message$ticket === void 0 ? void 0 : (_message$ticket$whats = _message$ticket.whatsapp) === null || _message$ticket$whats === void 0 ? void 0 : _message$ticket$whats.name;\n      let previousMessageTicket = messagesList[index - 1].ticketId;\n      if (messageTicket !== previousMessageTicket) {\n        return /*#__PURE__*/React.createElement(\"center\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.ticketNunberClosed,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }\n        }, \"Conversa encerrada: \", format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")), /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.ticketNunberOpen,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }\n        }, \"Conversa iniciada: \", format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")));\n      }\n    }\n  };\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n      if (messageUser !== previousMessageUser) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            marginTop: 16\n          },\n          key: `divider-${message.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 11\n          }\n        });\n      }\n    }\n  };\n  const renderQuotedMessage = message => {\n    var _message$quotedMsg, _message$quotedMsg2, _message$quotedMsg3, _message$quotedMsg3$c, _message$quotedMsg4;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx(classes.quotedContainerLeft, {\n        [classes.quotedContainerRight]: message.fromMe\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: clsx(classes.quotedSideColorLeft, {\n        [classes.quotedSideColorRight]: (_message$quotedMsg = message.quotedMsg) === null || _message$quotedMsg === void 0 ? void 0 : _message$quotedMsg.fromMe\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.quotedMsg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }\n    }, !((_message$quotedMsg2 = message.quotedMsg) === null || _message$quotedMsg2 === void 0 ? void 0 : _message$quotedMsg2.fromMe) && /*#__PURE__*/React.createElement(\"span\", {\n      className: classes.messageContactName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 13\n      }\n    }, (_message$quotedMsg3 = message.quotedMsg) === null || _message$quotedMsg3 === void 0 ? void 0 : (_message$quotedMsg3$c = _message$quotedMsg3.contact) === null || _message$quotedMsg3$c === void 0 ? void 0 : _message$quotedMsg3$c.name), message.quotedMsg.mediaType === \"audio\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.downloadMedia,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"audio\", {\n      controls: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"source\", {\n      src: message.quotedMsg.mediaUrl,\n      type: \"audio/ogg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 19\n      }\n    }))), message.quotedMsg.mediaType === \"video\" && /*#__PURE__*/React.createElement(\"video\", {\n      className: classes.messageMedia,\n      src: message.quotedMsg.mediaUrl,\n      controls: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 15\n      }\n    }), message.quotedMsg.mediaType === \"application\" && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.downloadMedia,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      startIcon: /*#__PURE__*/React.createElement(GetApp, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 30\n        }\n      }),\n      color: \"primary\",\n      variant: \"outlined\",\n      target: \"_blank\",\n      href: message.quotedMsg.mediaUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 17\n      }\n    }, \"Download\")), message.quotedMsg.mediaType === \"image\" && /*#__PURE__*/React.createElement(ModalImageCors, {\n      imageUrl: message.quotedMsg.mediaUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 15\n      }\n    }) || ((_message$quotedMsg4 = message.quotedMsg) === null || _message$quotedMsg4 === void 0 ? void 0 : _message$quotedMsg4.body)));\n  };\n  const renderMessages = () => {\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n        if (message.mediaType === \"call_log\") {\n          var _message$contact;\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageCenter,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 19\n            }\n          })), isGroup && /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.messageContactName,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 19\n            }\n          }, (_message$contact = message.contact) === null || _message$contact === void 0 ? void 0 : _message$contact.name), /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 20 17\",\n            width: \"20\",\n            height: \"17\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"path\", {\n            fill: \"#df3333\",\n            d: \"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 21\n            }\n          })), \" \", /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 26\n            }\n          }, \"Chamada de voz/v\\xEDdeo perdida \\xE0s \", format(parseISO(message.createdAt), \"HH:mm\")))));\n        }\n        if (!message.fromMe) {\n          var _message$contact2;\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 705,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageLeft,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 19\n            }\n          })), isGroup && /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.messageContactName,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 19\n            }\n          }, (_message$contact2 = message.contact) === null || _message$contact2 === void 0 ? void 0 : _message$contact2.name), message.isDeleted && /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"message-deleted\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 21\n            }\n          }, \"Essa mensagem foi apagada pelo contato \\xA0\", /*#__PURE__*/React.createElement(Block, {\n            color: \"error\",\n            fontSize: \"small\",\n            className: classes.deletedIcon,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 23\n            }\n          }))), (message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n          //|| message.mediaType === \"multi_vcard\" \n          ) && checkMessageMedia(message), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.textContentItem,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 17\n            }\n          }, message.quotedMsg && renderQuotedMessage(message), /*#__PURE__*/React.createElement(MarkdownWrapper, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 745,\n              columnNumber: 19\n            }\n          }, message.mediaType === \"locationMessage\" ? null : message.body), /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.timestamp,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 19\n            }\n          }, message.isEdited && /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 30\n            }\n          }, \"Editada \"), format(parseISO(message.createdAt), \"HH:mm\")))));\n        } else {\n          return /*#__PURE__*/React.createElement(React.Fragment, {\n            key: message.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 13\n            }\n          }, renderDailyTimestamps(message, index), renderNumberTicket(message, index), renderMessageDivider(message, index), /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.messageRight,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(IconButton, {\n            variant: \"contained\",\n            size: \"small\",\n            id: \"messageActionsButton\",\n            disabled: message.isDeleted,\n            className: classes.messageActionsButton,\n            onClick: e => handleOpenMessageOptionsMenu(e, message),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(ExpandMore, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 769,\n              columnNumber: 19\n            }\n          })), (message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n          //|| message.mediaType === \"multi_vcard\" \n          ) && checkMessageMedia(message), /*#__PURE__*/React.createElement(\"div\", {\n            className: clsx(classes.textContentItem, {\n              [classes.textContentItemDeleted]: message.isDeleted,\n              [classes.textContentItemEdited]: message.isEdited\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 17\n            }\n          }, message.isDeleted && /*#__PURE__*/React.createElement(Block, {\n            color: \"disabled\",\n            fontSize: \"small\",\n            className: classes.deletedIcon,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 781,\n              columnNumber: 21\n            }\n          }), message.quotedMsg && renderQuotedMessage(message), /*#__PURE__*/React.createElement(MarkdownWrapper, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 788,\n              columnNumber: 19\n            }\n          }, message.body), /*#__PURE__*/React.createElement(\"span\", {\n            className: classes.timestamp,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 19\n            }\n          }, message.isEdited && /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 30\n            }\n          }, \"Editada \"), format(parseISO(message.createdAt), \"HH:mm\"), renderMessageAck(message)))));\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 802,\n          columnNumber: 14\n        }\n      }, \"Diga ol\\xE1 para seu novo contato!\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.messagesListWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 807,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MessageOptionsMenu, {\n    message: selectedMessage,\n    anchorEl: anchorEl,\n    menuOpen: messageOptionsMenuOpen,\n    handleClose: handleCloseMessageOptionsMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 808,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"messagesList\",\n    className: classes.messagesList,\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 814,\n      columnNumber: 7\n    }\n  }, messagesList.length > 0 ? renderMessages() : []), loading && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 822,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    className: classes.circleLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 823,\n      columnNumber: 11\n    }\n  })));\n};\nexport default MessagesList;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useRef","useContext","isSameDay","parseISO","format","clsx","green","Button","CircularProgress","Divider","IconButton","makeStyles","AccessTime","Block","Done","DoneAll","ExpandMore","GetApp","MarkdownWrapper","ModalImageCors","MessageOptionsMenu","whatsBackground","LocationPreview","whatsBackgroundDark","api","toastError","SocketContext","useStyles","theme","messagesListWrapper","overflow","position","display","flexDirection","flexGrow","width","minWidth","minHeight","messagesList","backgroundImage","mode","padding","overflowY","scrollbarStyles","circleLoading","color","opacity","top","left","marginTop","messageLeft","marginRight","maxWidth","height","right","whiteSpace","backgroundColor","alignSelf","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","paddingLeft","paddingRight","paddingTop","paddingBottom","boxShadow","quotedContainerLeft","margin","borderRadius","quotedMsg","quotedSideColorLeft","flex","messageRight","marginLeft","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","zIndex","messageContactName","fontWeight","textContentItem","overflowWrap","textContentItemEdited","textContentItemDeleted","fontStyle","messageMedia","objectFit","timestamp","fontSize","bottom","dailyTimestamp","alignItems","textAlign","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","downloadMedia","justifyContent","reducer","state","action","type","messages","payload","newMessages","forEach","message","messageIndex","findIndex","m","id","push","newMessage","messageToUpdate","MessagesList","ticket","ticketId","isGroup","classes","dispatch","pageNumber","setPageNumber","hasMore","setHasMore","loading","setLoading","lastMessageRef","selectedMessage","setSelectedMessage","anchorEl","setAnchorEl","messageOptionsMenuOpen","Boolean","currentTicketId","socketManager","current","delayDebounceFn","setTimeout","fetchMessages","undefined","data","get","params","length","scrollToBottom","err","clearTimeout","companyId","localStorage","getItem","socket","getSocket","on","emit","disconnect","loadMore","prevPageNumber","scrollIntoView","handleScroll","e","scrollTop","currentTarget","document","getElementById","handleOpenMessageOptionsMenu","handleCloseMessageOptionsMenu","checkMessageMedia","mediaType","body","split","locationParts","imageLocation","linkLocation","descriptionLocation","createElement","image","link","description","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","imageUrl","mediaUrl","controls","src","className","Fragment","startIcon","variant","target","href","renderMessageAck","ack","renderDailyTimestamps","index","key","createdAt","messageDay","previousMessageDay","ref","style","float","clear","renderNumberTicket","_message$ticket","_message$ticket$whats","messageTicket","connectionName","whatsapp","name","previousMessageTicket","ticketNunberClosed","ticketNunberOpen","renderMessageDivider","messageUser","fromMe","previousMessageUser","renderQuotedMessage","_message$quotedMsg","_message$quotedMsg2","_message$quotedMsg3","_message$quotedMsg3$c","_message$quotedMsg4","contact","renderMessages","viewMessagesList","map","_message$contact","messageCenter","size","disabled","isDeleted","onClick","xmlns","viewBox","fill","d","_message$contact2","isEdited","menuOpen","handleClose","onScroll"],"sources":["/app/src/components/MessagesList/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useRef, useContext } from \"react\";\n\nimport { isSameDay, parseISO, format } from \"date-fns\";\nimport clsx from \"clsx\";\n\nimport { green } from \"@material-ui/core/colors\";\nimport {\n  Button,\n  CircularProgress,\n  Divider,\n  IconButton,\n  makeStyles,\n} from \"@material-ui/core\";\n\nimport {\n  AccessTime,\n  Block,\n  Done,\n  DoneAll,\n  ExpandMore,\n  GetApp,\n} from \"@material-ui/icons\";\n\nimport MarkdownWrapper from \"../MarkdownWrapper\";\nimport ModalImageCors from \"../ModalImageCors\";\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\nimport whatsBackground from \"../../assets/wa-background.png\";\nimport LocationPreview from \"../LocationPreview\";\n\nimport whatsBackgroundDark from \"../../assets/wa-background-dark.png\"; //DARK MODE PLW DESIGN//\n\nimport api from \"../../services/api\";\nimport toastError from \"../../errors/toastError\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  messagesListWrapper: {\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    width: \"100%\",\n    minWidth: 300,\n    minHeight: 200,\n  },\n\n  messagesList: {\n    backgroundImage: theme.mode === 'light' ? `url(${whatsBackground})` : `url(${whatsBackgroundDark})`, //DARK MODE PLW DESIGN//\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    padding: \"20px 20px 20px 20px\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n\n  circleLoading: {\n    color: green[500],\n    position: \"absolute\",\n    opacity: \"70%\",\n    top: 0,\n    left: \"50%\",\n    marginTop: 12,\n  },\n\n  messageLeft: {\n    marginRight: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#ffffff\",\n    color: \"#303030\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerLeft: {\n    margin: \"-3px -80px 6px -6px\",\n    overflow: \"hidden\",\n    backgroundColor: \"#f0f0f0\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsg: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\",\n    overflow: \"hidden\",\n  },\n\n  quotedSideColorLeft: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#6bcbef\",\n  },\n\n  messageRight: {\n    marginLeft: 20,\n    marginTop: 2,\n    minWidth: 100,\n    maxWidth: 600,\n    height: \"auto\",\n    display: \"block\",\n    position: \"relative\",\n    \"&:hover #messageActionsButton\": {\n      display: \"flex\",\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n    },\n\n    whiteSpace: \"pre-wrap\",\n    backgroundColor: \"#dcf8c6\",\n    color: \"#303030\",\n    alignSelf: \"flex-end\",\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 0,\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 5,\n    paddingBottom: 0,\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  quotedContainerRight: {\n    margin: \"-3px -80px 6px -6px\",\n    overflowY: \"hidden\",\n    backgroundColor: \"#cfe9ba\",\n    borderRadius: \"7.5px\",\n    display: \"flex\",\n    position: \"relative\",\n  },\n\n  quotedMsgRight: {\n    padding: 10,\n    maxWidth: 300,\n    height: \"auto\",\n    whiteSpace: \"pre-wrap\",\n  },\n\n  quotedSideColorRight: {\n    flex: \"none\",\n    width: \"4px\",\n    backgroundColor: \"#35cd96\",\n  },\n\n  messageActionsButton: {\n    display: \"none\",\n    position: \"relative\",\n    color: \"#999\",\n    zIndex: 1,\n    backgroundColor: \"inherit\",\n    opacity: \"90%\",\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\n  },\n\n  messageContactName: {\n    display: \"flex\",\n    color: \"#6bcbef\",\n    fontWeight: 500,\n  },\n\n  textContentItem: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n  \n  textContentItemEdited: {\n    overflowWrap: \"break-word\",\n    padding: \"3px 120px 6px 6px\",\n  },\n\n  textContentItemDeleted: {\n    fontStyle: \"italic\",\n    color: \"rgba(0, 0, 0, 0.36)\",\n    overflowWrap: \"break-word\",\n    padding: \"3px 80px 6px 6px\",\n  },\n\n  messageMedia: {\n    objectFit: \"cover\",\n    width: 250,\n    height: 200,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  },\n\n  timestamp: {\n    fontSize: 11,\n    position: \"absolute\",\n    bottom: 0,\n    right: 5,\n    color: \"#999\",\n  },\n\n  dailyTimestamp: {\n    alignItems: \"center\",\n    textAlign: \"center\",\n    alignSelf: \"center\",\n    width: \"110px\",\n    backgroundColor: \"#e1f3fb\",\n    margin: \"10px\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 1px 1px #b3b3b3\",\n  },\n\n  dailyTimestampText: {\n    color: \"#808888\",\n    padding: 8,\n    alignSelf: \"center\",\n    marginLeft: \"0px\",\n  },\n\n  ackIcons: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  deletedIcon: {\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginRight: 4,\n  },\n\n  ackDoneAllIcon: {\n    color: green[500],\n    fontSize: 18,\n    verticalAlign: \"middle\",\n    marginLeft: 4,\n  },\n\n  downloadMedia: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"inherit\",\n    padding: 10,\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_MESSAGES\") {\n    const messages = action.payload;\n    const newMessages = [];\n\n    messages.forEach((message) => {\n      const messageIndex = state.findIndex((m) => m.id === message.id);\n      if (messageIndex !== -1) {\n        state[messageIndex] = message;\n      } else {\n        newMessages.push(message);\n      }\n    });\n\n    return [...newMessages, ...state];\n  }\n\n  if (action.type === \"ADD_MESSAGE\") {\n    const newMessage = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = newMessage;\n    } else {\n      state.push(newMessage);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_MESSAGE\") {\n    const messageToUpdate = action.payload;\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\n\n    if (messageIndex !== -1) {\n      state[messageIndex] = messageToUpdate;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst MessagesList = ({ ticket, ticketId, isGroup }) => {\n  const classes = useStyles();\n\n  const [messagesList, dispatch] = useReducer(reducer, []);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const lastMessageRef = useRef();\n\n  const [selectedMessage, setSelectedMessage] = useState({});\n  const [anchorEl, setAnchorEl] = useState(null);\n  const messageOptionsMenuOpen = Boolean(anchorEl);\n  const currentTicketId = useRef(ticketId);\n\n  const socketManager = useContext(SocketContext);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n\n    currentTicketId.current = ticketId;\n  }, [ticketId]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchMessages = async () => {\n        if (ticketId === undefined) return;\n        try {\n          const { data } = await api.get(\"/messages/\" + ticketId, {\n            params: { pageNumber },\n          });\n\n          if (currentTicketId.current === ticketId) {\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\n            setHasMore(data.hasMore);\n            setLoading(false);\n          }\n\n          if (pageNumber === 1 && data.messages.length > 1) {\n            scrollToBottom();\n          }\n        } catch (err) {\n          setLoading(false);\n          toastError(err);\n        }\n      };\n      fetchMessages();\n    }, 500);\n    return () => {\n      clearTimeout(delayDebounceFn);\n    };\n  }, [pageNumber, ticketId]);\n\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n\n    socket.on(\"ready\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\n\n    socket.on(`company-${companyId}-appMessage`, (data) => {\n      if (data.action === \"create\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\n        scrollToBottom();\n      }\n\n      if (data.action === \"update\" && data.message.ticketId === currentTicketId.current) {\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [ticketId, ticket, socketManager]);\n\n  const loadMore = () => {\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\n  };\n\n  const scrollToBottom = () => {\n    if (lastMessageRef.current) {\n      lastMessageRef.current.scrollIntoView({});\n    }\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore) return;\n    const { scrollTop } = e.currentTarget;\n\n    if (scrollTop === 0) {\n      document.getElementById(\"messagesList\").scrollTop = 1;\n    }\n\n    if (loading) {\n      return;\n    }\n\n    if (scrollTop < 50) {\n      loadMore();\n    }\n  };\n\n  const handleOpenMessageOptionsMenu = (e, message) => {\n    setAnchorEl(e.currentTarget);\n    setSelectedMessage(message);\n  };\n\n  const handleCloseMessageOptionsMenu = (e) => {\n    setAnchorEl(null);\n  };\n\n  const checkMessageMedia = (message) => {\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\n      let locationParts = message.body.split('|')\n      let imageLocation = locationParts[0]\n      let linkLocation = locationParts[1]\n\n      let descriptionLocation = null\n\n      if (locationParts.length > 2)\n        descriptionLocation = message.body.split('|')[2]\n\n      return <LocationPreview image={imageLocation} link={linkLocation} description={descriptionLocation} />\n    }\n    /* else if (message.mediaType === \"vcard\") {\n      let array = message.body.split(\"\\n\");\n      let obj = [];\n      let contact = \"\";\n      for (let index = 0; index < array.length; index++) {\n        const v = array[index];\n        let values = v.split(\":\");\n        for (let ind = 0; ind < values.length; ind++) {\n          if (values[ind].indexOf(\"+\") !== -1) {\n            obj.push({ number: values[ind] });\n          }\n          if (values[ind].indexOf(\"FN\") !== -1) {\n            contact = values[ind + 1];\n          }\n        }\n      }\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\n    } */\n    /*else if (message.mediaType === \"multi_vcard\") {\n      console.log(\"multi_vcard\")\n      console.log(message)\n    \t\n      if(message.body !== null && message.body !== \"\") {\n        let newBody = JSON.parse(message.body)\n        return (\n          <>\n            {\n            newBody.map(v => (\n              <VcardPreview contact={v.name} numbers={v.number} />\n            ))\n            }\n          </>\n        )\n      } else return (<></>)\n    }*/\n    else if (message.mediaType === \"image\") {\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\n    } else if (message.mediaType === \"audio\") {\n      return (\n        <audio controls>\n          <source src={message.mediaUrl} type=\"audio/ogg\"></source>\n        </audio>\n      );\n    } else if (message.mediaType === \"video\") {\n      return (\n        <video\n          className={classes.messageMedia}\n          src={message.mediaUrl}\n          controls\n        />\n      );\n    } else {\n      return (\n        <>\n          <div className={classes.downloadMedia}>\n            <Button\n              startIcon={<GetApp />}\n              color=\"primary\"\n              variant=\"outlined\"\n              target=\"_blank\"\n              href={message.mediaUrl}\n            >\n              Download\n            </Button>\n          </div>\n          <Divider />\n        </>\n      );\n    }\n  };\n\n  const renderMessageAck = (message) => {\n    if (message.ack === 1) {\n      return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 2) {\n      return <Done fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 3) {\n      return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\n    }\n    if (message.ack === 4 || message.ack === 5) {\n      return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\n    }\n  };\n\n  const renderDailyTimestamps = (message, index) => {\n    if (index === 0) {\n      return (\n        <span\n          className={classes.dailyTimestamp}\n          key={`timestamp-${message.id}`}\n        >\n          <div className={classes.dailyTimestampText}>\n            {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n          </div>\n        </span>\n      );\n    }\n    if (index < messagesList.length - 1) {\n      let messageDay = parseISO(messagesList[index].createdAt);\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\n\n      if (!isSameDay(messageDay, previousMessageDay)) {\n        return (\n          <span\n            className={classes.dailyTimestamp}\n            key={`timestamp-${message.id}`}\n          >\n            <div className={classes.dailyTimestampText}>\n              {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\n            </div>\n          </span>\n        );\n      }\n    }\n    if (index === messagesList.length - 1) {\n      return (\n        <div\n          key={`ref-${message.createdAt}`}\n          ref={lastMessageRef}\n          style={{ float: \"left\", clear: \"both\" }}\n        />\n      );\n    }\n  };\n\n  const renderNumberTicket = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n\n      let messageTicket = message.ticketId;\n      let connectionName = message.ticket?.whatsapp?.name;\n      let previousMessageTicket = messagesList[index - 1].ticketId;\n\n      if (messageTicket !== previousMessageTicket) {\n        return (\n          <center>\n            <div className={classes.ticketNunberClosed}>\n              Conversa encerrada: {format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")}\n            </div>\n\n            <div className={classes.ticketNunberOpen}>\n              Conversa iniciada: {format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")}\n            </div>\n          </center>\n        );\n      }\n    }\n  };\n\n  const renderMessageDivider = (message, index) => {\n    if (index < messagesList.length && index > 0) {\n      let messageUser = messagesList[index].fromMe;\n      let previousMessageUser = messagesList[index - 1].fromMe;\n\n      if (messageUser !== previousMessageUser) {\n        return (\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\n        );\n      }\n    }\n  };\n\n  const renderQuotedMessage = (message) => {\n    return (\n      <div\n        className={clsx(classes.quotedContainerLeft, {\n          [classes.quotedContainerRight]: message.fromMe,\n        })}\n      >\n        <span\n          className={clsx(classes.quotedSideColorLeft, {\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\n          })}\n        ></span>\n        <div className={classes.quotedMsg}>\n          {!message.quotedMsg?.fromMe && (\n            <span className={classes.messageContactName}>\n              {message.quotedMsg?.contact?.name}\n            </span>\n          )}\n\n          {message.quotedMsg.mediaType === \"audio\"\n            && (\n              <div className={classes.downloadMedia}>\n                <audio controls>\n                  <source src={message.quotedMsg.mediaUrl} type=\"audio/ogg\"></source>\n                </audio>\n              </div>\n            )\n          }\n          {message.quotedMsg.mediaType === \"video\"\n            && (\n              <video\n                className={classes.messageMedia}\n                src={message.quotedMsg.mediaUrl}\n                controls\n              />\n            )\n          }\n          {message.quotedMsg.mediaType === \"application\"\n            && (\n              <div className={classes.downloadMedia}>\n                <Button\n                  startIcon={<GetApp />}\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  target=\"_blank\"\n                  href={message.quotedMsg.mediaUrl}\n                >\n                  Download\n                </Button>\n              </div>\n            )\n          }\n\n          {message.quotedMsg.mediaType === \"image\"\n            && (\n              <ModalImageCors imageUrl={message.quotedMsg.mediaUrl} />)\n            || message.quotedMsg?.body}\n\n        </div>\n      </div>\n    );\n  };\n\n  const renderMessages = () => {\n    if (messagesList.length > 0) {\n      const viewMessagesList = messagesList.map((message, index) => {\n\n        if (message.mediaType === \"call_log\") {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageCenter}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n                <div>\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 17\" width=\"20\" height=\"17\">\n                    <path fill=\"#df3333\" d=\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"></path>\n                  </svg> <span>Chamada de voz/vídeo perdida às {format(parseISO(message.createdAt), \"HH:mm\")}</span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n\n        if (!message.fromMe) {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageLeft}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {isGroup && (\n                  <span className={classes.messageContactName}>\n                    {message.contact?.name}\n                  </span>\n                )}\n\n                {/* aviso de mensagem apagado pelo contato */}\n                {message.isDeleted && (\n                  <div>\n                    <span className={\"message-deleted\"}\n                    >Essa mensagem foi apagada pelo contato &nbsp;\n                      <Block\n                        color=\"error\"\n                        fontSize=\"small\"\n                        className={classes.deletedIcon}\n                      />\n                    </span>\n                  </div>\n                )}\n\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n                  //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div className={classes.textContentItem}>\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>{message.mediaType === \"locationMessage\" ? null : message.body}</MarkdownWrapper>\n                  <span className={classes.timestamp}>\n\t\t\t\t    {message.isEdited && <span>Editada </span>}\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        } else {\n          return (\n            <React.Fragment key={message.id}>\n              {renderDailyTimestamps(message, index)}\n              {renderNumberTicket(message, index)}\n              {renderMessageDivider(message, index)}\n              <div className={classes.messageRight}>\n                <IconButton\n                  variant=\"contained\"\n                  size=\"small\"\n                  id=\"messageActionsButton\"\n                  disabled={message.isDeleted}\n                  className={classes.messageActionsButton}\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\n                >\n                  <ExpandMore />\n                </IconButton>\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\n                  //|| message.mediaType === \"multi_vcard\" \n                ) && checkMessageMedia(message)}\n                <div\n                  className={clsx(classes.textContentItem, {\n                    [classes.textContentItemDeleted]: message.isDeleted,\n\t\t\t\t\t[classes.textContentItemEdited]: message.isEdited,\n                  })}\n                >\n                  {message.isDeleted && (\n                    <Block\n                      color=\"disabled\"\n                      fontSize=\"small\"\n                      className={classes.deletedIcon}\n                    />\n                  )}\n                  {message.quotedMsg && renderQuotedMessage(message)}\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\n                  <span className={classes.timestamp}>\n\t\t\t\t    {message.isEdited && <span>Editada </span>}\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\n                    {renderMessageAck(message)}\n                  </span>\n                </div>\n              </div>\n            </React.Fragment>\n          );\n        }\n      });\n      return viewMessagesList;\n    } else {\n      return <div>Diga olá para seu novo contato!</div>;\n    }\n  };\n\n  return (\n    <div className={classes.messagesListWrapper}>\n      <MessageOptionsMenu\n        message={selectedMessage}\n        anchorEl={anchorEl}\n        menuOpen={messageOptionsMenuOpen}\n        handleClose={handleCloseMessageOptionsMenu}\n      />\n      <div\n        id=\"messagesList\"\n        className={classes.messagesList}\n        onScroll={handleScroll}\n      >\n        {messagesList.length > 0 ? renderMessages() : []}\n      </div>\n      {loading && (\n        <div>\n          <CircularProgress className={classes.circleLoading} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessagesList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}