{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useControlled from '@mui/utils/useControlled';\nimport { useTheme } from '@mui/material/styles';\nimport { useUtils, useLocaleText, useLocalizationContext } from '../useUtils';\nimport { addPositionPropertiesToSections, splitFormatIntoSections, mergeDateIntoReferenceDate, getSectionsBoundaries, validateSections, getDateFromDateSections } from './useField.utils';\nimport { useValueWithTimezone } from '../useValueWithTimezone';\nimport { getSectionTypeGranularity } from '../../utils/getDefaultReferenceDate';\nexport const useFieldState = params => {\n  const utils = useUtils();\n  const localeText = useLocaleText();\n  const adapter = useLocalizationContext();\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const {\n    valueManager,\n    fieldValueManager,\n    valueType,\n    validator,\n    internalProps,\n    internalProps: {\n      value: valueProp,\n      defaultValue,\n      referenceDate: referenceDateProp,\n      onChange,\n      format,\n      formatDensity = 'dense',\n      selectedSections: selectedSectionsProp,\n      onSelectedSectionsChange,\n      shouldRespectLeadingZeros = false,\n      timezone: timezoneProp\n    }\n  } = params;\n  const {\n    timezone,\n    value: valueFromTheOutside,\n    handleValueChange\n  } = useValueWithTimezone({\n    timezone: timezoneProp,\n    value: valueProp,\n    defaultValue,\n    onChange,\n    valueManager\n  });\n  const sectionsValueBoundaries = React.useMemo(() => getSectionsBoundaries(utils, timezone), [utils, timezone]);\n  const getSectionsFromValue = React.useCallback((value, fallbackSections = null) => fieldValueManager.getSectionsFromValue(utils, value, fallbackSections, isRTL, date => splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL)), [fieldValueManager, format, localeText, isRTL, shouldRespectLeadingZeros, utils, formatDensity, timezone]);\n  const placeholder = React.useMemo(() => fieldValueManager.getValueStrFromSections(getSectionsFromValue(valueManager.emptyValue), isRTL), [fieldValueManager, getSectionsFromValue, valueManager.emptyValue, isRTL]);\n  const [state, setState] = React.useState(() => {\n    const sections = getSectionsFromValue(valueFromTheOutside);\n    validateSections(sections, valueType);\n    const stateWithoutReferenceDate = {\n      sections,\n      value: valueFromTheOutside,\n      referenceValue: valueManager.emptyValue,\n      tempValueStrAndroid: null\n    };\n    const granularity = getSectionTypeGranularity(sections);\n    const referenceValue = valueManager.getInitialReferenceValue({\n      referenceDate: referenceDateProp,\n      value: valueFromTheOutside,\n      utils,\n      props: internalProps,\n      granularity,\n      timezone\n    });\n    return _extends({}, stateWithoutReferenceDate, {\n      referenceValue\n    });\n  });\n  const [selectedSections, innerSetSelectedSections] = useControlled({\n    controlled: selectedSectionsProp,\n    default: null,\n    name: 'useField',\n    state: 'selectedSectionIndexes'\n  });\n  const setSelectedSections = newSelectedSections => {\n    innerSetSelectedSections(newSelectedSections);\n    onSelectedSectionsChange == null || onSelectedSectionsChange(newSelectedSections);\n    setState(prevState => _extends({}, prevState, {\n      selectedSectionQuery: null\n    }));\n  };\n  const selectedSectionIndexes = React.useMemo(() => {\n    if (selectedSections == null) {\n      return null;\n    }\n    if (selectedSections === 'all') {\n      return {\n        startIndex: 0,\n        endIndex: state.sections.length - 1,\n        shouldSelectBoundarySelectors: true\n      };\n    }\n    if (typeof selectedSections === 'number') {\n      return {\n        startIndex: selectedSections,\n        endIndex: selectedSections\n      };\n    }\n    if (typeof selectedSections === 'string') {\n      const selectedSectionIndex = state.sections.findIndex(section => section.type === selectedSections);\n      return {\n        startIndex: selectedSectionIndex,\n        endIndex: selectedSectionIndex\n      };\n    }\n    return selectedSections;\n  }, [selectedSections, state.sections]);\n  const publishValue = ({\n    value,\n    referenceValue,\n    sections\n  }) => {\n    setState(prevState => _extends({}, prevState, {\n      sections,\n      value,\n      referenceValue,\n      tempValueStrAndroid: null\n    }));\n    if (valueManager.areValuesEqual(utils, state.value, value)) {\n      return;\n    }\n    const context = {\n      validationError: validator({\n        adapter,\n        value,\n        props: _extends({}, internalProps, {\n          value,\n          timezone\n        })\n      })\n    };\n    handleValueChange(value, context);\n  };\n  const setSectionValue = (sectionIndex, newSectionValue) => {\n    const newSections = [...state.sections];\n    newSections[sectionIndex] = _extends({}, newSections[sectionIndex], {\n      value: newSectionValue,\n      modified: true\n    });\n    return addPositionPropertiesToSections(newSections, isRTL);\n  };\n  const clearValue = () => {\n    publishValue({\n      value: valueManager.emptyValue,\n      referenceValue: state.referenceValue,\n      sections: getSectionsFromValue(valueManager.emptyValue)\n    });\n  };\n  const clearActiveSection = () => {\n    if (selectedSectionIndexes == null) {\n      return;\n    }\n    const activeSection = state.sections[selectedSectionIndexes.startIndex];\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const nonEmptySectionCountBefore = activeDateManager.getSections(state.sections).filter(section => section.value !== '').length;\n    const hasNoOtherNonEmptySections = nonEmptySectionCountBefore === (activeSection.value === '' ? 0 : 1);\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, '');\n    const newActiveDate = hasNoOtherNonEmptySections ? null : utils.date(new Date(''));\n    const newValues = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n    if ((newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date))) {\n      publishValue(_extends({}, newValues, {\n        sections: newSections\n      }));\n    } else {\n      setState(prevState => _extends({}, prevState, newValues, {\n        sections: newSections,\n        tempValueStrAndroid: null\n      }));\n    }\n  };\n  const updateValueFromValueStr = valueStr => {\n    const parseDateStr = (dateStr, referenceDate) => {\n      const date = utils.parse(dateStr, format);\n      if (date == null || !utils.isValid(date)) {\n        return null;\n      }\n      const sections = splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL);\n      return mergeDateIntoReferenceDate(utils, timezone, date, sections, referenceDate, false);\n    };\n    const newValue = fieldValueManager.parseValueStr(valueStr, state.referenceValue, parseDateStr);\n    const newReferenceValue = fieldValueManager.updateReferenceValue(utils, newValue, state.referenceValue);\n    publishValue({\n      value: newValue,\n      referenceValue: newReferenceValue,\n      sections: getSectionsFromValue(newValue, state.sections)\n    });\n  };\n  const updateSectionValue = ({\n    activeSection,\n    newSectionValue,\n    shouldGoToNextSection\n  }) => {\n    /**\n     * 1. Decide which section should be focused\n     */\n    if (shouldGoToNextSection && selectedSectionIndexes && selectedSectionIndexes.startIndex < state.sections.length - 1) {\n      setSelectedSections(selectedSectionIndexes.startIndex + 1);\n    } else if (selectedSectionIndexes && selectedSectionIndexes.startIndex !== selectedSectionIndexes.endIndex) {\n      setSelectedSections(selectedSectionIndexes.startIndex);\n    }\n\n    /**\n     * 2. Try to build a valid date from the new section value\n     */\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, newSectionValue);\n    const newActiveDateSections = activeDateManager.getSections(newSections);\n    const newActiveDate = getDateFromDateSections(utils, newActiveDateSections);\n    let values;\n    let shouldPublish;\n\n    /**\n     * If the new date is valid,\n     * Then we merge the value of the modified sections into the reference date.\n     * This makes sure that we don't lose some information of the initial date (like the time on a date field).\n     */\n    if (newActiveDate != null && utils.isValid(newActiveDate)) {\n      const mergedDate = mergeDateIntoReferenceDate(utils, timezone, newActiveDate, newActiveDateSections, activeDateManager.referenceDate, true);\n      values = activeDateManager.getNewValuesFromNewActiveDate(mergedDate);\n      shouldPublish = true;\n    } else {\n      values = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n      shouldPublish = (newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date));\n    }\n\n    /**\n     * Publish or update the internal state with the new value and sections.\n     */\n    if (shouldPublish) {\n      return publishValue(_extends({}, values, {\n        sections: newSections\n      }));\n    }\n    return setState(prevState => _extends({}, prevState, values, {\n      sections: newSections,\n      tempValueStrAndroid: null\n    }));\n  };\n  const setTempAndroidValueStr = tempValueStrAndroid => setState(prev => _extends({}, prev, {\n    tempValueStrAndroid\n  }));\n  React.useEffect(() => {\n    const sections = getSectionsFromValue(state.value);\n    validateSections(sections, valueType);\n    setState(prevState => _extends({}, prevState, {\n      sections\n    }));\n  }, [format, utils.locale]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  React.useEffect(() => {\n    let shouldUpdate = false;\n    if (!valueManager.areValuesEqual(utils, state.value, valueFromTheOutside)) {\n      shouldUpdate = true;\n    } else {\n      shouldUpdate = valueManager.getTimezone(utils, state.value) !== valueManager.getTimezone(utils, valueFromTheOutside);\n    }\n    if (shouldUpdate) {\n      setState(prevState => _extends({}, prevState, {\n        value: valueFromTheOutside,\n        referenceValue: fieldValueManager.updateReferenceValue(utils, valueFromTheOutside, prevState.referenceValue),\n        sections: getSectionsFromValue(valueFromTheOutside)\n      }));\n    }\n  }, [valueFromTheOutside]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    state,\n    selectedSectionIndexes,\n    setSelectedSections,\n    clearValue,\n    clearActiveSection,\n    updateSectionValue,\n    updateValueFromValueStr,\n    setTempAndroidValueStr,\n    sectionsValueBoundaries,\n    placeholder,\n    timezone\n  };\n};","map":{"version":3,"names":["_extends","React","useControlled","useTheme","useUtils","useLocaleText","useLocalizationContext","addPositionPropertiesToSections","splitFormatIntoSections","mergeDateIntoReferenceDate","getSectionsBoundaries","validateSections","getDateFromDateSections","useValueWithTimezone","getSectionTypeGranularity","useFieldState","params","utils","localeText","adapter","theme","isRTL","direction","valueManager","fieldValueManager","valueType","validator","internalProps","value","valueProp","defaultValue","referenceDate","referenceDateProp","onChange","format","formatDensity","selectedSections","selectedSectionsProp","onSelectedSectionsChange","shouldRespectLeadingZeros","timezone","timezoneProp","valueFromTheOutside","handleValueChange","sectionsValueBoundaries","useMemo","getSectionsFromValue","useCallback","fallbackSections","date","placeholder","getValueStrFromSections","emptyValue","state","setState","useState","sections","stateWithoutReferenceDate","referenceValue","tempValueStrAndroid","granularity","getInitialReferenceValue","props","innerSetSelectedSections","controlled","default","name","setSelectedSections","newSelectedSections","prevState","selectedSectionQuery","selectedSectionIndexes","startIndex","endIndex","length","shouldSelectBoundarySelectors","selectedSectionIndex","findIndex","section","type","publishValue","areValuesEqual","context","validationError","setSectionValue","sectionIndex","newSectionValue","newSections","modified","clearValue","clearActiveSection","activeSection","activeDateManager","getActiveDateManager","nonEmptySectionCountBefore","getSections","filter","hasNoOtherNonEmptySections","newActiveDate","Date","newValues","getNewValuesFromNewActiveDate","isValid","updateValueFromValueStr","valueStr","parseDateStr","dateStr","parse","newValue","parseValueStr","newReferenceValue","updateReferenceValue","updateSectionValue","shouldGoToNextSection","newActiveDateSections","values","shouldPublish","mergedDate","setTempAndroidValueStr","prev","useEffect","locale","shouldUpdate","getTimezone"],"sources":["/app/node_modules/@mui/x-date-pickers/internals/hooks/useField/useFieldState.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport useControlled from '@mui/utils/useControlled';\nimport { useTheme } from '@mui/material/styles';\nimport { useUtils, useLocaleText, useLocalizationContext } from '../useUtils';\nimport { addPositionPropertiesToSections, splitFormatIntoSections, mergeDateIntoReferenceDate, getSectionsBoundaries, validateSections, getDateFromDateSections } from './useField.utils';\nimport { useValueWithTimezone } from '../useValueWithTimezone';\nimport { getSectionTypeGranularity } from '../../utils/getDefaultReferenceDate';\nexport const useFieldState = params => {\n  const utils = useUtils();\n  const localeText = useLocaleText();\n  const adapter = useLocalizationContext();\n  const theme = useTheme();\n  const isRTL = theme.direction === 'rtl';\n  const {\n    valueManager,\n    fieldValueManager,\n    valueType,\n    validator,\n    internalProps,\n    internalProps: {\n      value: valueProp,\n      defaultValue,\n      referenceDate: referenceDateProp,\n      onChange,\n      format,\n      formatDensity = 'dense',\n      selectedSections: selectedSectionsProp,\n      onSelectedSectionsChange,\n      shouldRespectLeadingZeros = false,\n      timezone: timezoneProp\n    }\n  } = params;\n  const {\n    timezone,\n    value: valueFromTheOutside,\n    handleValueChange\n  } = useValueWithTimezone({\n    timezone: timezoneProp,\n    value: valueProp,\n    defaultValue,\n    onChange,\n    valueManager\n  });\n  const sectionsValueBoundaries = React.useMemo(() => getSectionsBoundaries(utils, timezone), [utils, timezone]);\n  const getSectionsFromValue = React.useCallback((value, fallbackSections = null) => fieldValueManager.getSectionsFromValue(utils, value, fallbackSections, isRTL, date => splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL)), [fieldValueManager, format, localeText, isRTL, shouldRespectLeadingZeros, utils, formatDensity, timezone]);\n  const placeholder = React.useMemo(() => fieldValueManager.getValueStrFromSections(getSectionsFromValue(valueManager.emptyValue), isRTL), [fieldValueManager, getSectionsFromValue, valueManager.emptyValue, isRTL]);\n  const [state, setState] = React.useState(() => {\n    const sections = getSectionsFromValue(valueFromTheOutside);\n    validateSections(sections, valueType);\n    const stateWithoutReferenceDate = {\n      sections,\n      value: valueFromTheOutside,\n      referenceValue: valueManager.emptyValue,\n      tempValueStrAndroid: null\n    };\n    const granularity = getSectionTypeGranularity(sections);\n    const referenceValue = valueManager.getInitialReferenceValue({\n      referenceDate: referenceDateProp,\n      value: valueFromTheOutside,\n      utils,\n      props: internalProps,\n      granularity,\n      timezone\n    });\n    return _extends({}, stateWithoutReferenceDate, {\n      referenceValue\n    });\n  });\n  const [selectedSections, innerSetSelectedSections] = useControlled({\n    controlled: selectedSectionsProp,\n    default: null,\n    name: 'useField',\n    state: 'selectedSectionIndexes'\n  });\n  const setSelectedSections = newSelectedSections => {\n    innerSetSelectedSections(newSelectedSections);\n    onSelectedSectionsChange == null || onSelectedSectionsChange(newSelectedSections);\n    setState(prevState => _extends({}, prevState, {\n      selectedSectionQuery: null\n    }));\n  };\n  const selectedSectionIndexes = React.useMemo(() => {\n    if (selectedSections == null) {\n      return null;\n    }\n    if (selectedSections === 'all') {\n      return {\n        startIndex: 0,\n        endIndex: state.sections.length - 1,\n        shouldSelectBoundarySelectors: true\n      };\n    }\n    if (typeof selectedSections === 'number') {\n      return {\n        startIndex: selectedSections,\n        endIndex: selectedSections\n      };\n    }\n    if (typeof selectedSections === 'string') {\n      const selectedSectionIndex = state.sections.findIndex(section => section.type === selectedSections);\n      return {\n        startIndex: selectedSectionIndex,\n        endIndex: selectedSectionIndex\n      };\n    }\n    return selectedSections;\n  }, [selectedSections, state.sections]);\n  const publishValue = ({\n    value,\n    referenceValue,\n    sections\n  }) => {\n    setState(prevState => _extends({}, prevState, {\n      sections,\n      value,\n      referenceValue,\n      tempValueStrAndroid: null\n    }));\n    if (valueManager.areValuesEqual(utils, state.value, value)) {\n      return;\n    }\n    const context = {\n      validationError: validator({\n        adapter,\n        value,\n        props: _extends({}, internalProps, {\n          value,\n          timezone\n        })\n      })\n    };\n    handleValueChange(value, context);\n  };\n  const setSectionValue = (sectionIndex, newSectionValue) => {\n    const newSections = [...state.sections];\n    newSections[sectionIndex] = _extends({}, newSections[sectionIndex], {\n      value: newSectionValue,\n      modified: true\n    });\n    return addPositionPropertiesToSections(newSections, isRTL);\n  };\n  const clearValue = () => {\n    publishValue({\n      value: valueManager.emptyValue,\n      referenceValue: state.referenceValue,\n      sections: getSectionsFromValue(valueManager.emptyValue)\n    });\n  };\n  const clearActiveSection = () => {\n    if (selectedSectionIndexes == null) {\n      return;\n    }\n    const activeSection = state.sections[selectedSectionIndexes.startIndex];\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const nonEmptySectionCountBefore = activeDateManager.getSections(state.sections).filter(section => section.value !== '').length;\n    const hasNoOtherNonEmptySections = nonEmptySectionCountBefore === (activeSection.value === '' ? 0 : 1);\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, '');\n    const newActiveDate = hasNoOtherNonEmptySections ? null : utils.date(new Date(''));\n    const newValues = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n    if ((newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date))) {\n      publishValue(_extends({}, newValues, {\n        sections: newSections\n      }));\n    } else {\n      setState(prevState => _extends({}, prevState, newValues, {\n        sections: newSections,\n        tempValueStrAndroid: null\n      }));\n    }\n  };\n  const updateValueFromValueStr = valueStr => {\n    const parseDateStr = (dateStr, referenceDate) => {\n      const date = utils.parse(dateStr, format);\n      if (date == null || !utils.isValid(date)) {\n        return null;\n      }\n      const sections = splitFormatIntoSections(utils, timezone, localeText, format, date, formatDensity, shouldRespectLeadingZeros, isRTL);\n      return mergeDateIntoReferenceDate(utils, timezone, date, sections, referenceDate, false);\n    };\n    const newValue = fieldValueManager.parseValueStr(valueStr, state.referenceValue, parseDateStr);\n    const newReferenceValue = fieldValueManager.updateReferenceValue(utils, newValue, state.referenceValue);\n    publishValue({\n      value: newValue,\n      referenceValue: newReferenceValue,\n      sections: getSectionsFromValue(newValue, state.sections)\n    });\n  };\n  const updateSectionValue = ({\n    activeSection,\n    newSectionValue,\n    shouldGoToNextSection\n  }) => {\n    /**\n     * 1. Decide which section should be focused\n     */\n    if (shouldGoToNextSection && selectedSectionIndexes && selectedSectionIndexes.startIndex < state.sections.length - 1) {\n      setSelectedSections(selectedSectionIndexes.startIndex + 1);\n    } else if (selectedSectionIndexes && selectedSectionIndexes.startIndex !== selectedSectionIndexes.endIndex) {\n      setSelectedSections(selectedSectionIndexes.startIndex);\n    }\n\n    /**\n     * 2. Try to build a valid date from the new section value\n     */\n    const activeDateManager = fieldValueManager.getActiveDateManager(utils, state, activeSection);\n    const newSections = setSectionValue(selectedSectionIndexes.startIndex, newSectionValue);\n    const newActiveDateSections = activeDateManager.getSections(newSections);\n    const newActiveDate = getDateFromDateSections(utils, newActiveDateSections);\n    let values;\n    let shouldPublish;\n\n    /**\n     * If the new date is valid,\n     * Then we merge the value of the modified sections into the reference date.\n     * This makes sure that we don't lose some information of the initial date (like the time on a date field).\n     */\n    if (newActiveDate != null && utils.isValid(newActiveDate)) {\n      const mergedDate = mergeDateIntoReferenceDate(utils, timezone, newActiveDate, newActiveDateSections, activeDateManager.referenceDate, true);\n      values = activeDateManager.getNewValuesFromNewActiveDate(mergedDate);\n      shouldPublish = true;\n    } else {\n      values = activeDateManager.getNewValuesFromNewActiveDate(newActiveDate);\n      shouldPublish = (newActiveDate != null && !utils.isValid(newActiveDate)) !== (activeDateManager.date != null && !utils.isValid(activeDateManager.date));\n    }\n\n    /**\n     * Publish or update the internal state with the new value and sections.\n     */\n    if (shouldPublish) {\n      return publishValue(_extends({}, values, {\n        sections: newSections\n      }));\n    }\n    return setState(prevState => _extends({}, prevState, values, {\n      sections: newSections,\n      tempValueStrAndroid: null\n    }));\n  };\n  const setTempAndroidValueStr = tempValueStrAndroid => setState(prev => _extends({}, prev, {\n    tempValueStrAndroid\n  }));\n  React.useEffect(() => {\n    const sections = getSectionsFromValue(state.value);\n    validateSections(sections, valueType);\n    setState(prevState => _extends({}, prevState, {\n      sections\n    }));\n  }, [format, utils.locale]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  React.useEffect(() => {\n    let shouldUpdate = false;\n    if (!valueManager.areValuesEqual(utils, state.value, valueFromTheOutside)) {\n      shouldUpdate = true;\n    } else {\n      shouldUpdate = valueManager.getTimezone(utils, state.value) !== valueManager.getTimezone(utils, valueFromTheOutside);\n    }\n    if (shouldUpdate) {\n      setState(prevState => _extends({}, prevState, {\n        value: valueFromTheOutside,\n        referenceValue: fieldValueManager.updateReferenceValue(utils, valueFromTheOutside, prevState.referenceValue),\n        sections: getSectionsFromValue(valueFromTheOutside)\n      }));\n    }\n  }, [valueFromTheOutside]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    state,\n    selectedSectionIndexes,\n    setSelectedSections,\n    clearValue,\n    clearActiveSection,\n    updateSectionValue,\n    updateValueFromValueStr,\n    setTempAndroidValueStr,\n    sectionsValueBoundaries,\n    placeholder,\n    timezone\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}