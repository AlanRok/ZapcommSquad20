{"ast":null,"code":"var _jsxFileName = \"/app/src/components/CheckoutPage/CheckoutSuccess/CheckoutSuccess.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport QRCode from 'react-qr-code';\nimport { SuccessContent, Total } from './style';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { FaCopy, FaCheckCircle } from 'react-icons/fa';\nimport { SocketContext } from \"../../../context/Socket/SocketContext\";\nimport { useDate } from \"../../../hooks/useDate\";\nimport { toast } from \"react-toastify\";\nfunction CheckoutSuccess(props) {\n  const {\n    pix\n  } = props;\n  const [pixString] = useState(pix.qrcode.qrcode);\n  const [copied, setCopied] = useState(false);\n  const history = useHistory();\n  const {\n    dateToClient\n  } = useDate();\n  const socketManager = useContext(SocketContext);\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n    socket.on(`company-${companyId}-payment`, data => {\n      if (data.action === \"CONCLUIDA\") {\n        toast.success(`Sua licença foi renovada até ${dateToClient(data.company.dueDate)}!`);\n        setTimeout(() => {\n          history.push(\"/\");\n        }, 4000);\n      }\n    });\n  }, [history, socketManager]);\n  const handleCopyQR = () => {\n    setTimeout(() => {\n      setCopied(false);\n    }, 1 * 1000);\n    setCopied(true);\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Total, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, \"TOTAL\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"R$\", pix.valor.original.toLocaleString('pt-br', {\n    minimumFractionDigits: 2\n  }))), /*#__PURE__*/React.createElement(SuccessContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(QRCode, {\n    value: pixString,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CopyToClipboard, {\n    text: pixString,\n    onCopy: handleCopyQR,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"copy-button\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, copied ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"Copiado\"), /*#__PURE__*/React.createElement(FaCheckCircle, {\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Copiar c\\xF3digo QR\"), /*#__PURE__*/React.createElement(FaCopy, {\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, \"Para finalizar, basta realizar o pagamento escaneando ou colando o c\\xF3digo Pix acima :)\")));\n}\nexport default CheckoutSuccess;","map":{"version":3,"names":["React","useState","useEffect","useContext","useHistory","QRCode","SuccessContent","Total","CopyToClipboard","FaCopy","FaCheckCircle","SocketContext","useDate","toast","CheckoutSuccess","props","pix","pixString","qrcode","copied","setCopied","history","dateToClient","socketManager","companyId","localStorage","getItem","socket","getSocket","on","data","action","success","company","dueDate","setTimeout","push","handleCopyQR","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","valor","original","toLocaleString","minimumFractionDigits","value","text","onCopy","className","type","size"],"sources":["/app/src/components/CheckoutPage/CheckoutSuccess/CheckoutSuccess.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport QRCode from 'react-qr-code';\nimport { SuccessContent, Total } from './style';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { FaCopy, FaCheckCircle } from 'react-icons/fa';\nimport { SocketContext } from \"../../../context/Socket/SocketContext\";\nimport { useDate } from \"../../../hooks/useDate\";\nimport { toast } from \"react-toastify\";\n\nfunction CheckoutSuccess(props) {\n\n  const { pix } = props;\n  const [pixString,] = useState(pix.qrcode.qrcode);\n  const [copied, setCopied] = useState(false);\n  const history = useHistory();\n\n  const { dateToClient } = useDate();\n\n  const socketManager = useContext(SocketContext);\n\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n    \n    socket.on(`company-${companyId}-payment`, (data) => {\n\n      if (data.action === \"CONCLUIDA\") {\n        toast.success(`Sua licença foi renovada até ${dateToClient(data.company.dueDate)}!`);\n        setTimeout(() => {\n          history.push(\"/\");\n        }, 4000);\n      }\n    });\n  }, [history, socketManager]);\n\n  const handleCopyQR = () => {\n    setTimeout(() => {\n      setCopied(false);\n    }, 1 * 1000);\n    setCopied(true);\n  };\n\n  return (\n    <React.Fragment>\n      <Total>\n        <span>TOTAL</span>\n        <strong>R${pix.valor.original.toLocaleString('pt-br', { minimumFractionDigits: 2 })}</strong>\n      </Total>\n      <SuccessContent>\n        <QRCode value={pixString} />\n        <CopyToClipboard text={pixString} onCopy={handleCopyQR}>\n          <button className=\"copy-button\" type=\"button\">\n            {copied ? (\n              <>\n                <span>Copiado</span>\n                <FaCheckCircle size={18} />\n              </>\n            ) : (\n              <>\n                <span>Copiar código QR</span>\n                <FaCopy size={18} />\n              </>\n            )}\n          </button>\n        </CopyToClipboard>\n        <span>\n          Para finalizar, basta realizar o pagamento escaneando ou colando o\n          código Pix acima :)\n        </span>\n      </SuccessContent>\n    </React.Fragment>\n  );\n}\n\nexport default CheckoutSuccess;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}