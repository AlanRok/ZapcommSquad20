{"ast":null,"code":"import rules from \"../../rules\";\nconst check = (role, action, data) => {\n  const permissions = rules[role];\n  if (!permissions) {\n    // role is not present in the rules\n    return false;\n  }\n  const staticPermissions = permissions.static;\n  if (staticPermissions && staticPermissions.includes(action)) {\n    // static rule not provided for action\n    return true;\n  }\n  const dynamicPermissions = permissions.dynamic;\n  if (dynamicPermissions) {\n    const permissionCondition = dynamicPermissions[action];\n    if (!permissionCondition) {\n      // dynamic rule not provided for action\n      return false;\n    }\n    return permissionCondition(data);\n  }\n  return false;\n};\nconst Can = ({\n  role,\n  perform,\n  data,\n  yes,\n  no\n}) => check(role, perform, data) ? yes() : no();\nCan.defaultProps = {\n  yes: () => null,\n  no: () => null\n};\nexport { Can };","map":{"version":3,"names":["rules","check","role","action","data","permissions","staticPermissions","static","includes","dynamicPermissions","dynamic","permissionCondition","Can","perform","yes","no","defaultProps"],"sources":["/app/src/components/Can/index.js"],"sourcesContent":["import rules from \"../../rules\";\n\nconst check = (role, action, data) => {\n\tconst permissions = rules[role];\n\tif (!permissions) {\n\t\t// role is not present in the rules\n\t\treturn false;\n\t}\n\n\tconst staticPermissions = permissions.static;\n\n\tif (staticPermissions && staticPermissions.includes(action)) {\n\t\t// static rule not provided for action\n\t\treturn true;\n\t}\n\n\tconst dynamicPermissions = permissions.dynamic;\n\n\tif (dynamicPermissions) {\n\t\tconst permissionCondition = dynamicPermissions[action];\n\t\tif (!permissionCondition) {\n\t\t\t// dynamic rule not provided for action\n\t\t\treturn false;\n\t\t}\n\n\t\treturn permissionCondition(data);\n\t}\n\treturn false;\n};\n\nconst Can = ({ role, perform, data, yes, no }) =>\n\tcheck(role, perform, data) ? yes() : no();\n\nCan.defaultProps = {\n\tyes: () => null,\n\tno: () => null,\n};\n\nexport { Can };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,aAAa;AAE/B,MAAMC,KAAK,GAAGA,CAACC,IAAI,EAAEC,MAAM,EAAEC,IAAI,KAAK;EACrC,MAAMC,WAAW,GAAGL,KAAK,CAACE,IAAI,CAAC;EAC/B,IAAI,CAACG,WAAW,EAAE;IACjB;IACA,OAAO,KAAK;EACb;EAEA,MAAMC,iBAAiB,GAAGD,WAAW,CAACE,MAAM;EAE5C,IAAID,iBAAiB,IAAIA,iBAAiB,CAACE,QAAQ,CAACL,MAAM,CAAC,EAAE;IAC5D;IACA,OAAO,IAAI;EACZ;EAEA,MAAMM,kBAAkB,GAAGJ,WAAW,CAACK,OAAO;EAE9C,IAAID,kBAAkB,EAAE;IACvB,MAAME,mBAAmB,GAAGF,kBAAkB,CAACN,MAAM,CAAC;IACtD,IAAI,CAACQ,mBAAmB,EAAE;MACzB;MACA,OAAO,KAAK;IACb;IAEA,OAAOA,mBAAmB,CAACP,IAAI,CAAC;EACjC;EACA,OAAO,KAAK;AACb,CAAC;AAED,MAAMQ,GAAG,GAAGA,CAAC;EAAEV,IAAI;EAAEW,OAAO;EAAET,IAAI;EAAEU,GAAG;EAAEC;AAAG,CAAC,KAC5Cd,KAAK,CAACC,IAAI,EAAEW,OAAO,EAAET,IAAI,CAAC,GAAGU,GAAG,CAAC,CAAC,GAAGC,EAAE,CAAC,CAAC;AAE1CH,GAAG,CAACI,YAAY,GAAG;EAClBF,GAAG,EAAEA,CAAA,KAAM,IAAI;EACfC,EAAE,EAAEA,CAAA,KAAM;AACX,CAAC;AAED,SAASH,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module"}