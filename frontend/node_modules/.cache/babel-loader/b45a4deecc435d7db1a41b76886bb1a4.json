{"ast":null,"code":"var _jsxFileName = \"/app/src/components/QrcodeModal/index.js\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport QRCode from \"qrcode.react\";\nimport toastError from \"../../errors/toastError\";\nimport { Dialog, DialogContent, Paper, Typography, useTheme } from \"@material-ui/core\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\nconst QrcodeModal = ({\n  open,\n  onClose,\n  whatsAppId\n}) => {\n  const [qrCode, setQrCode] = useState(\"\");\n  const theme = useTheme();\n  const socketManager = useContext(SocketContext);\n  useEffect(() => {\n    const fetchSession = async () => {\n      if (!whatsAppId) return;\n      try {\n        const {\n          data\n        } = await api.get(`/whatsapp/${whatsAppId}`);\n        setQrCode(data.qrcode);\n      } catch (err) {\n        toastError(err);\n      }\n    };\n    fetchSession();\n  }, [whatsAppId]);\n  useEffect(() => {\n    if (!whatsAppId) return;\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n    socket.on(`company-${companyId}-whatsappSession`, data => {\n      if (data.action === \"update\" && data.session.id === whatsAppId) {\n        setQrCode(data.session.qrcode);\n      }\n      if (data.action === \"update\" && data.session.qrcode === \"\") {\n        onClose();\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [whatsAppId, onClose, socketManager]);\n  return /*#__PURE__*/React.createElement(Dialog, {\n    open: open,\n    onClose: onClose,\n    maxWidth: \"lg\",\n    scroll: \"paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    elevation: 0,\n    style: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginRight: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h2\",\n    component: \"h2\",\n    color: \"textPrimary\",\n    gutterBottom: true,\n    style: {\n      fontFamily: \"Montserrat\",\n      fontWeight: \"bold\",\n      fontSize: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, \"Utilize o seu WhatsApp:\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"textPrimary\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, \"1 - Abra o WhatsApp no seu celular\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"textPrimary\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \"2 - Toque em Mais op\\xE7\\xF5es no Android \", /*#__PURE__*/React.createElement(\"svg\", {\n    class: \"MuiSvgIcon-root\",\n    focusable: \"false\",\n    viewBox: \"0 0 24 24\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 51\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 137\n    }\n  })), \" ou em Configura\\xE7\\xF5es \", /*#__PURE__*/React.createElement(\"svg\", {\n    class: \"MuiSvgIcon-root\",\n    focusable: \"false\",\n    viewBox: \"0 0 24 24\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 327\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 413\n    }\n  })), \" no iPhone\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"textPrimary\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"3 - Toque em Dispositivos conectados e, em seguida, em Conectar dispositivos\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"textPrimary\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, \"4 - Aponte seu celular para essa tela para capturar o QR Code\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, qrCode ? /*#__PURE__*/React.createElement(QRCode, {\n    value: qrCode,\n    size: 256,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }, \"Waiting for QR Code\")))));\n};\nexport default React.memo(QrcodeModal);","map":{"version":3,"names":["React","useEffect","useState","useContext","QRCode","toastError","Dialog","DialogContent","Paper","Typography","useTheme","i18n","api","SocketContext","QrcodeModal","open","onClose","whatsAppId","qrCode","setQrCode","theme","socketManager","fetchSession","data","get","qrcode","err","companyId","localStorage","getItem","socket","getSocket","on","action","session","id","disconnect","createElement","maxWidth","scroll","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","elevation","style","display","alignItems","marginRight","variant","component","color","gutterBottom","fontFamily","fontWeight","fontSize","class","focusable","viewBox","d","value","size","memo"],"sources":["/app/src/components/QrcodeModal/index.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport QRCode from \"qrcode.react\";\nimport toastError from \"../../errors/toastError\";\n\nimport { Dialog, DialogContent, Paper, Typography, useTheme } from \"@material-ui/core\";\nimport { i18n } from \"../../translate/i18n\";\nimport api from \"../../services/api\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\n\nconst QrcodeModal = ({ open, onClose, whatsAppId }) => {\n  const [qrCode, setQrCode] = useState(\"\");\n  const theme = useTheme();\n\n  const socketManager = useContext(SocketContext);\n\n  useEffect(() => {\n    const fetchSession = async () => {\n      if (!whatsAppId) return;\n\n      try {\n        const { data } = await api.get(`/whatsapp/${whatsAppId}`);\n        setQrCode(data.qrcode);\n      } catch (err) {\n        toastError(err);\n      }\n    };\n    fetchSession();\n  }, [whatsAppId]);\n\n  useEffect(() => {\n    if (!whatsAppId) return;\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n\n    socket.on(`company-${companyId}-whatsappSession`, (data) => {\n      if (data.action === \"update\" && data.session.id === whatsAppId) {\n        setQrCode(data.session.qrcode);\n      }\n\n      if (data.action === \"update\" && data.session.qrcode === \"\") {\n        onClose();\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [whatsAppId, onClose, socketManager]);\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"lg\" scroll=\"paper\">\n      <DialogContent>\n        <Paper elevation={0} style={{ display: \"flex\", alignItems: \"center\" }}>\n          <div style={{ marginRight: \"20px\" }}>\n            <Typography variant=\"h2\" component=\"h2\" color=\"textPrimary\" gutterBottom style={{ fontFamily: \"Montserrat\", fontWeight: \"bold\", fontSize:\"20px\",}}>\n              Utilize o seu WhatsApp:\n            </Typography>\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\n              1 - Abra o WhatsApp no seu celular\n            </Typography>\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\n              2 - Toque em Mais opções no Android <svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"></path></svg> ou em Configurações <svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"></path></svg> no iPhone\n            </Typography>\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\n              3 - Toque em Dispositivos conectados e, em seguida, em Conectar dispositivos\n            </Typography>\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\n              4 - Aponte seu celular para essa tela para capturar o QR Code\n            </Typography>\n          </div>\n          <div>\n            {qrCode ? (\n              <QRCode value={qrCode} size={256} />\n            ) : (\n              <span>Waiting for QR Code</span>\n            )}\n          </div>\n        </Paper>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default React.memo(QrcodeModal);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}