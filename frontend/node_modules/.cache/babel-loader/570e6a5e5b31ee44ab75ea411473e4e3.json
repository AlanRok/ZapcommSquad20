{"ast":null,"code":"var inherits = require('inherits');\nvar Buffer = require('buffer').Buffer;\nvar asn1 = require('../../asn1');\nvar base = asn1.base;\n\n// Import DER constants\nvar der = asn1.constants.der;\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n}\n;\nmodule.exports = DEREncoder;\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  base.Node.call(this, 'der', parent);\n}\ninherits(DERNode, base.Node);\nDERNode.prototype._encodeComposite = function encodeComposite(tag, primitive, cls, content) {\n  var encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    var header = new Buffer(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([header, content]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  var lenOctets = 1;\n  for (var i = content.length; i >= 0x100; i >>= 8) lenOctets++;\n  var header = new Buffer(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n  for (var i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8) header[i] = j & 0xff;\n  return this._createEncoderBuffer([header, content]);\n};\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([str.unused | 0, str.data]);\n  } else if (tag === 'bmpstr') {\n    var buf = new Buffer(str.length * 2);\n    for (var i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' + 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' + 'only latin upper and lower case letters, ' + 'digits, space, apostrophe, left and rigth ' + 'parenthesis, plus sign, comma, hyphen, ' + 'dot, slash, colon, equal sign, ' + 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag + ' unsupported');\n  }\n};\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values) return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id)) return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s\\.]+/g);\n    for (var i = 0; i < id.length; i++) id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (var i = 0; i < id.length; i++) id[i] |= 0;\n  }\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' + 'got: ' + JSON.stringify(id));\n  }\n  if (!relative) {\n    if (id[1] >= 40) return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  var size = 0;\n  for (var i = 0; i < id.length; i++) {\n    var ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7) size++;\n  }\n  var objid = new Buffer(size);\n  var offset = objid.length - 1;\n  for (var i = id.length - 1; i >= 0; i--) {\n    var ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0) objid[offset--] = 0x80 | ident & 0x7f;\n  }\n  return this._createEncoderBuffer(objid);\n};\nfunction two(num) {\n  if (num < 10) return '0' + num;else return num;\n}\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  var str;\n  var date = new Date(time);\n  if (tag === 'gentime') {\n    str = [two(date.getFullYear()), two(date.getUTCMonth() + 1), two(date.getUTCDate()), two(date.getUTCHours()), two(date.getUTCMinutes()), two(date.getUTCSeconds()), 'Z'].join('');\n  } else if (tag === 'utctime') {\n    str = [two(date.getFullYear() % 100), two(date.getUTCMonth() + 1), two(date.getUTCDate()), two(date.getUTCHours()), two(date.getUTCMinutes()), two(date.getUTCSeconds()), 'Z'].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n  return this._encodeStr(str, 'octstr');\n};\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values) return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' + JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    var numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = new Buffer(numArray);\n  }\n  if (Buffer.isBuffer(num)) {\n    var size = num.length;\n    if (num.length === 0) size++;\n    var out = new Buffer(size);\n    num.copy(out);\n    if (num.length === 0) out[0] = 0;\n    return this._createEncoderBuffer(out);\n  }\n  if (num < 0x80) return this._createEncoderBuffer(num);\n  if (num < 0x100) return this._createEncoderBuffer([0, num]);\n  var size = 1;\n  for (var i = num; i >= 0x100; i >>= 8) size++;\n  var out = new Array(size);\n  for (var i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if (out[0] & 0x80) {\n    out.unshift(0);\n  }\n  return this._createEncoderBuffer(new Buffer(out));\n};\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function') entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  var state = this._baseState;\n  var i;\n  if (state['default'] === null) return false;\n  var data = dataBuffer.join();\n  if (state.defaultBuffer === undefined) state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n  if (data.length !== state.defaultBuffer.length) return false;\n  for (i = 0; i < data.length; i++) if (data[i] !== state.defaultBuffer[i]) return false;\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  var res;\n  if (tag === 'seqof') tag = 'seq';else if (tag === 'setof') tag = 'set';\n  if (der.tagByName.hasOwnProperty(tag)) res = der.tagByName[tag];else if (typeof tag === 'number' && (tag | 0) === tag) res = tag;else return reporter.error('Unknown tag: ' + tag);\n  if (res >= 0x1f) return reporter.error('Multi-octet tag encoding unsupported');\n  if (!primitive) res |= 0x20;\n  res |= der.tagClassByName[cls || 'universal'] << 6;\n  return res;\n}","map":{"version":3,"names":["inherits","require","Buffer","asn1","base","der","constants","DEREncoder","entity","enc","name","tree","DERNode","_init","body","module","exports","prototype","encode","data","reporter","_encode","join","parent","Node","call","_encodeComposite","encodeComposite","tag","primitive","cls","content","encodedTag","encodeTag","length","header","_createEncoderBuffer","lenOctets","i","j","_encodeStr","encodeStr","str","unused","buf","writeUInt16BE","charCodeAt","_isNumstr","error","_isPrintstr","test","_encodeObjid","encodeObjid","id","values","relative","hasOwnProperty","split","Array","isArray","slice","JSON","stringify","splice","size","ident","objid","offset","two","num","_encodeTime","encodeTime","time","date","Date","getFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_encodeNull","encodeNull","_encodeInt","encodeInt","isBuffer","numArray","toArray","sign","unshift","out","copy","_encodeBool","encodeBool","value","_use","use","obj","_getEncoder","_skipDefault","skipDefault","dataBuffer","state","_baseState","defaultBuffer","undefined","_encodeValue","res","tagByName","tagClassByName"],"sources":["/app/node_modules/asn1.js/lib/asn1/encoders/der.js"],"sourcesContent":["var inherits = require('inherits');\nvar Buffer = require('buffer').Buffer;\n\nvar asn1 = require('../../asn1');\nvar base = asn1.base;\n\n// Import DER constants\nvar der = asn1.constants.der;\n\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n};\nmodule.exports = DEREncoder;\n\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  base.Node.call(this, 'der', parent);\n}\ninherits(DERNode, base.Node);\n\nDERNode.prototype._encodeComposite = function encodeComposite(tag,\n                                                              primitive,\n                                                              cls,\n                                                              content) {\n  var encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    var header = new Buffer(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([ header, content ]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  var lenOctets = 1;\n  for (var i = content.length; i >= 0x100; i >>= 8)\n    lenOctets++;\n\n  var header = new Buffer(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n\n  for (var i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8)\n    header[i] = j & 0xff;\n\n  return this._createEncoderBuffer([ header, content ]);\n};\n\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([ str.unused | 0, str.data ]);\n  } else if (tag === 'bmpstr') {\n    var buf = new Buffer(str.length * 2);\n    for (var i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' +\n                                 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' +\n                                 'only latin upper and lower case letters, ' +\n                                 'digits, space, apostrophe, left and rigth ' +\n                                 'parenthesis, plus sign, comma, hyphen, ' +\n                                 'dot, slash, colon, equal sign, ' +\n                                 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag +\n                               ' unsupported');\n  }\n};\n\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values)\n      return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id))\n      return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s\\.]+/g);\n    for (var i = 0; i < id.length; i++)\n      id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (var i = 0; i < id.length; i++)\n      id[i] |= 0;\n  }\n\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' +\n                               'got: ' + JSON.stringify(id));\n  }\n\n  if (!relative) {\n    if (id[1] >= 40)\n      return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  var size = 0;\n  for (var i = 0; i < id.length; i++) {\n    var ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7)\n      size++;\n  }\n\n  var objid = new Buffer(size);\n  var offset = objid.length - 1;\n  for (var i = id.length - 1; i >= 0; i--) {\n    var ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0)\n      objid[offset--] = 0x80 | (ident & 0x7f);\n  }\n\n  return this._createEncoderBuffer(objid);\n};\n\nfunction two(num) {\n  if (num < 10)\n    return '0' + num;\n  else\n    return num;\n}\n\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  var str;\n  var date = new Date(time);\n\n  if (tag === 'gentime') {\n    str = [\n      two(date.getFullYear()),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else if (tag === 'utctime') {\n    str = [\n      two(date.getFullYear() % 100),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n\n  return this._encodeStr(str, 'octstr');\n};\n\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\n\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values)\n      return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' +\n                                 JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    var numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = new Buffer(numArray);\n  }\n\n  if (Buffer.isBuffer(num)) {\n    var size = num.length;\n    if (num.length === 0)\n      size++;\n\n    var out = new Buffer(size);\n    num.copy(out);\n    if (num.length === 0)\n      out[0] = 0\n    return this._createEncoderBuffer(out);\n  }\n\n  if (num < 0x80)\n    return this._createEncoderBuffer(num);\n\n  if (num < 0x100)\n    return this._createEncoderBuffer([0, num]);\n\n  var size = 1;\n  for (var i = num; i >= 0x100; i >>= 8)\n    size++;\n\n  var out = new Array(size);\n  for (var i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if(out[0] & 0x80) {\n    out.unshift(0);\n  }\n\n  return this._createEncoderBuffer(new Buffer(out));\n};\n\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\n\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function')\n    entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\n\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  var state = this._baseState;\n  var i;\n  if (state['default'] === null)\n    return false;\n\n  var data = dataBuffer.join();\n  if (state.defaultBuffer === undefined)\n    state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n\n  if (data.length !== state.defaultBuffer.length)\n    return false;\n\n  for (i=0; i < data.length; i++)\n    if (data[i] !== state.defaultBuffer[i])\n      return false;\n\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  var res;\n\n  if (tag === 'seqof')\n    tag = 'seq';\n  else if (tag === 'setof')\n    tag = 'set';\n\n  if (der.tagByName.hasOwnProperty(tag))\n    res = der.tagByName[tag];\n  else if (typeof tag === 'number' && (tag | 0) === tag)\n    res = tag;\n  else\n    return reporter.error('Unknown tag: ' + tag);\n\n  if (res >= 0x1f)\n    return reporter.error('Multi-octet tag encoding unsupported');\n\n  if (!primitive)\n    res |= 0x20;\n\n  res |= (der.tagClassByName[cls || 'universal'] << 6);\n\n  return res;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}