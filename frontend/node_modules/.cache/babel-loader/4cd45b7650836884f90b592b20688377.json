{"ast":null,"code":"var _jsxFileName = \"/app/src/components/TicketsListCustom/index.js\";\nimport React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TicketListItem from \"../TicketListItemCustom\";\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\nimport useTickets from \"../../hooks/useTickets\";\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\nconst useStyles = makeStyles(theme => ({\n  ticketsListWrapper: {\n    position: \"relative\",\n    display: \"flex\",\n    height: \"100%\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0\n  },\n  ticketsList: {\n    flex: 1,\n    maxHeight: \"100%\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n    borderTop: \"2px solid rgba(0, 0, 0, 0.12)\"\n  },\n  ticketsListHeader: {\n    color: \"rgb(67, 83, 105)\",\n    zIndex: 2,\n    backgroundColor: \"white\",\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  },\n  ticketsCount: {\n    fontWeight: \"normal\",\n    color: \"rgb(104, 121, 146)\",\n    marginLeft: \"8px\",\n    fontSize: \"14px\"\n  },\n  noTicketsText: {\n    textAlign: \"center\",\n    color: \"rgb(104, 121, 146)\",\n    fontSize: \"14px\",\n    lineHeight: \"1.4\"\n  },\n  noTicketsTitle: {\n    textAlign: \"center\",\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    margin: \"0px\"\n  },\n  noTicketsDiv: {\n    display: \"flex\",\n    height: \"100px\",\n    margin: 40,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_TICKETS\") {\n    const newTickets = action.payload;\n    newTickets.forEach(ticket => {\n      const ticketIndex = state.findIndex(t => t.id === ticket.id);\n      if (ticketIndex !== -1) {\n        state[ticketIndex] = ticket;\n        if (ticket.unreadMessages > 0) {\n          state.unshift(state.splice(ticketIndex, 1)[0]);\n        }\n      } else {\n        state.push(ticket);\n      }\n    });\n    return [...state];\n  }\n  if (action.type === \"RESET_UNREAD\") {\n    const ticketId = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].unreadMessages = 0;\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_TICKET\") {\n    const ticket = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n    } else {\n      state.unshift(ticket);\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\n    const ticket = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n      state.unshift(state.splice(ticketIndex, 1)[0]);\n    } else {\n      state.unshift(ticket);\n    }\n    return [...state];\n  }\n  if (action.type === \"UPDATE_TICKET_CONTACT\") {\n    const contact = action.payload;\n    const ticketIndex = state.findIndex(t => t.contactId === contact.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].contact = contact;\n    }\n    return [...state];\n  }\n  if (action.type === \"DELETE_TICKET\") {\n    const ticketId = action.payload;\n    const ticketIndex = state.findIndex(t => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state.splice(ticketIndex, 1);\n    }\n    return [...state];\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\nconst TicketsListCustom = props => {\n  const {\n    status,\n    searchParam,\n    tags,\n    users,\n    showAll,\n    selectedQueueIds,\n    updateCount,\n    style\n  } = props;\n  const classes = useStyles();\n  const [pageNumber, setPageNumber] = useState(1);\n  const [ticketsList, dispatch] = useReducer(reducer, []);\n  const {\n    user\n  } = useContext(AuthContext);\n  const {\n    profile,\n    queues\n  } = user;\n  const socketManager = useContext(SocketContext);\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n  }, [status, searchParam, dispatch, showAll, tags, users, selectedQueueIds]);\n  const {\n    tickets,\n    hasMore,\n    loading\n  } = useTickets({\n    pageNumber,\n    searchParam,\n    status,\n    showAll,\n    tags: JSON.stringify(tags),\n    users: JSON.stringify(users),\n    queueIds: JSON.stringify(selectedQueueIds)\n  });\n  useEffect(() => {\n    const queueIds = queues.map(q => q.id);\n    const filteredTickets = tickets.filter(t => queueIds.indexOf(t.queueId) > -1);\n    if (profile === \"user\") {\n      dispatch({\n        type: \"LOAD_TICKETS\",\n        payload: filteredTickets\n      });\n    } else {\n      dispatch({\n        type: \"LOAD_TICKETS\",\n        payload: tickets\n      });\n    }\n  }, [tickets, status, searchParam, queues, profile]);\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n    const shouldUpdateTicket = ticket => (!ticket.userId || ticket.userId === (user === null || user === void 0 ? void 0 : user.id) || showAll) && (!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\n    const notBelongsToUserQueues = ticket => ticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\n    socket.on(\"ready\", () => {\n      if (status) {\n        socket.emit(\"joinTickets\", status);\n      } else {\n        socket.emit(\"joinNotification\");\n      }\n    });\n    socket.on(`company-${companyId}-ticket`, data => {\n      if (data.action === \"updateUnread\") {\n        dispatch({\n          type: \"RESET_UNREAD\",\n          payload: data.ticketId\n        });\n      }\n      if (data.action === \"update\" && shouldUpdateTicket(data.ticket) && data.ticket.status === status) {\n        dispatch({\n          type: \"UPDATE_TICKET\",\n          payload: data.ticket\n        });\n      }\n      if (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\n        dispatch({\n          type: \"DELETE_TICKET\",\n          payload: data.ticket.id\n        });\n      }\n      if (data.action === \"delete\") {\n        dispatch({\n          type: \"DELETE_TICKET\",\n          payload: data.ticketId\n        });\n      }\n    });\n    socket.on(`company-${companyId}-appMessage`, data => {\n      var _data$ticket, _data$ticket$queue;\n      const queueIds = queues.map(q => q.id);\n      if (profile === \"user\" && (queueIds.indexOf((_data$ticket = data.ticket) === null || _data$ticket === void 0 ? void 0 : (_data$ticket$queue = _data$ticket.queue) === null || _data$ticket$queue === void 0 ? void 0 : _data$ticket$queue.id) === -1 || data.ticket.queue === null)) {\n        return;\n      }\n      if (data.action === \"create\" && shouldUpdateTicket(data.ticket) && (status === undefined || data.ticket.status === status)) {\n        dispatch({\n          type: \"UPDATE_TICKET_UNREAD_MESSAGES\",\n          payload: data.ticket\n        });\n      }\n    });\n    socket.on(`company-${companyId}-contact`, data => {\n      if (data.action === \"update\") {\n        dispatch({\n          type: \"UPDATE_TICKET_CONTACT\",\n          payload: data.contact\n        });\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [status, showAll, user, selectedQueueIds, tags, users, profile, queues, socketManager]);\n  useEffect(() => {\n    if (typeof updateCount === \"function\") {\n      updateCount(ticketsList.length);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ticketsList]);\n  const loadMore = () => {\n    setPageNumber(prevState => prevState + 1);\n  };\n  const handleScroll = e => {\n    if (!hasMore || loading) return;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight\n    } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n  return /*#__PURE__*/React.createElement(Paper, {\n    className: classes.ticketsListWrapper,\n    style: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    square: true,\n    name: \"closed\",\n    elevation: 0,\n    className: classes.ticketsList,\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    style: {\n      paddingTop: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }\n  }, ticketsList.length === 0 && !loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.noTicketsDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.noTicketsTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 15\n    }\n  }, i18n.t(\"ticketsList.noTicketsTitle\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.noTicketsText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 15\n    }\n  }, i18n.t(\"ticketsList.noTicketsMessage\"))) : /*#__PURE__*/React.createElement(React.Fragment, null, ticketsList.map(ticket => /*#__PURE__*/React.createElement(TicketListItem, {\n    ticket: ticket,\n    key: ticket.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 17\n    }\n  }))), loading && /*#__PURE__*/React.createElement(TicketsListSkeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 23\n    }\n  }))));\n};\nexport default TicketsListCustom;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","makeStyles","List","Paper","TicketListItem","TicketsListSkeleton","useTickets","i18n","AuthContext","SocketContext","useStyles","theme","ticketsListWrapper","position","display","height","flexDirection","overflow","borderTopRightRadius","borderBottomRightRadius","ticketsList","flex","maxHeight","overflowY","scrollbarStyles","borderTop","ticketsListHeader","color","zIndex","backgroundColor","borderBottom","alignItems","justifyContent","ticketsCount","fontWeight","marginLeft","fontSize","noTicketsText","textAlign","lineHeight","noTicketsTitle","margin","noTicketsDiv","reducer","state","action","type","newTickets","payload","forEach","ticket","ticketIndex","findIndex","t","id","unreadMessages","unshift","splice","push","ticketId","contact","contactId","TicketsListCustom","props","status","searchParam","tags","users","showAll","selectedQueueIds","updateCount","style","classes","pageNumber","setPageNumber","dispatch","user","profile","queues","socketManager","tickets","hasMore","loading","JSON","stringify","queueIds","map","q","filteredTickets","filter","indexOf","queueId","companyId","localStorage","getItem","socket","getSocket","shouldUpdateTicket","userId","notBelongsToUserQueues","on","emit","data","_data$ticket","_data$ticket$queue","queue","undefined","disconnect","length","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","square","name","elevation","onScroll","paddingTop","Fragment","key"],"sources":["/app/src/components/TicketsListCustom/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport TicketListItem from \"../TicketListItemCustom\";\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\n\nimport useTickets from \"../../hooks/useTickets\";\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  ticketsListWrapper: {\n    position: \"relative\",\n    display: \"flex\",\n    height: \"100%\",\n    flexDirection: \"column\",\n    overflow: \"hidden\",\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n  },\n\n  ticketsList: {\n    flex: 1,\n    maxHeight: \"100%\",\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n    borderTop: \"2px solid rgba(0, 0, 0, 0.12)\",\n  },\n\n  ticketsListHeader: {\n    color: \"rgb(67, 83, 105)\",\n    zIndex: 2,\n    backgroundColor: \"white\",\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n\n  ticketsCount: {\n    fontWeight: \"normal\",\n    color: \"rgb(104, 121, 146)\",\n    marginLeft: \"8px\",\n    fontSize: \"14px\",\n  },\n\n  noTicketsText: {\n    textAlign: \"center\",\n    color: \"rgb(104, 121, 146)\",\n    fontSize: \"14px\",\n    lineHeight: \"1.4\",\n  },\n\n  noTicketsTitle: {\n    textAlign: \"center\",\n    fontSize: \"16px\",\n    fontWeight: \"600\",\n    margin: \"0px\",\n  },\n\n  noTicketsDiv: {\n    display: \"flex\",\n    height: \"100px\",\n    margin: 40,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_TICKETS\") {\n    const newTickets = action.payload;\n\n    newTickets.forEach((ticket) => {\n      const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n      if (ticketIndex !== -1) {\n        state[ticketIndex] = ticket;\n        if (ticket.unreadMessages > 0) {\n          state.unshift(state.splice(ticketIndex, 1)[0]);\n        }\n      } else {\n        state.push(ticket);\n      }\n    });\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET_UNREAD\") {\n    const ticketId = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].unreadMessages = 0;\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET\") {\n    const ticket = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n    } else {\n      state.unshift(ticket);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\n    const ticket = action.payload;\n\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex] = ticket;\n      state.unshift(state.splice(ticketIndex, 1)[0]);\n    } else {\n      state.unshift(ticket);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"UPDATE_TICKET_CONTACT\") {\n    const contact = action.payload;\n    const ticketIndex = state.findIndex((t) => t.contactId === contact.id);\n    if (ticketIndex !== -1) {\n      state[ticketIndex].contact = contact;\n    }\n    return [...state];\n  }\n\n  if (action.type === \"DELETE_TICKET\") {\n    const ticketId = action.payload;\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\n    if (ticketIndex !== -1) {\n      state.splice(ticketIndex, 1);\n    }\n\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst TicketsListCustom = (props) => {\n  const {\n    status,\n    searchParam,\n    tags,\n    users,\n    showAll,\n    selectedQueueIds,\n    updateCount,\n    style,\n  } = props;\n  const classes = useStyles();\n  const [pageNumber, setPageNumber] = useState(1);\n  const [ticketsList, dispatch] = useReducer(reducer, []);\n  const { user } = useContext(AuthContext);\n  const { profile, queues } = user;\n\n  const socketManager = useContext(SocketContext);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [status, searchParam, dispatch, showAll, tags, users, selectedQueueIds]);\n\n  const { tickets, hasMore, loading } = useTickets({\n    pageNumber,\n    searchParam,\n    status,\n    showAll,\n    tags: JSON.stringify(tags),\n    users: JSON.stringify(users),\n    queueIds: JSON.stringify(selectedQueueIds),\n  });\n\n  useEffect(() => {\n    const queueIds = queues.map((q) => q.id);\n    const filteredTickets = tickets.filter(\n      (t) => queueIds.indexOf(t.queueId) > -1\n    );\n\n    if (profile === \"user\") {\n      dispatch({ type: \"LOAD_TICKETS\", payload: filteredTickets });\n    } else {\n      dispatch({ type: \"LOAD_TICKETS\", payload: tickets });\n    }\n  }, [tickets, status, searchParam, queues, profile]);\n\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketManager.getSocket(companyId);\n\n    const shouldUpdateTicket = (ticket) =>\n      (!ticket.userId || ticket.userId === user?.id || showAll) &&\n      (!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\n\n    const notBelongsToUserQueues = (ticket) =>\n      ticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\n\n    socket.on(\"ready\", () => {\n      if (status) {\n        socket.emit(\"joinTickets\", status);\n      } else {\n        socket.emit(\"joinNotification\");\n      }\n    });\n\n    socket.on(`company-${companyId}-ticket`, (data) => {\n      \n      if (data.action === \"updateUnread\") {\n        dispatch({\n          type: \"RESET_UNREAD\",\n          payload: data.ticketId,\n        });\n      }\n\n      if (data.action === \"update\" && shouldUpdateTicket(data.ticket) && data.ticket.status === status) {\n        dispatch({\n          type: \"UPDATE_TICKET\",\n          payload: data.ticket,\n        });\n      }\n\n      if (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticket.id });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticketId });\n      }\n    });\n\n    socket.on(`company-${companyId}-appMessage`, (data) => {\n      const queueIds = queues.map((q) => q.id);\n      if (\n        profile === \"user\" &&\n        (queueIds.indexOf(data.ticket?.queue?.id) === -1 ||\n          data.ticket.queue === null)\n      ) {\n        return;\n      }\n\n      if (data.action === \"create\" && shouldUpdateTicket(data.ticket) && ( status === undefined || data.ticket.status === status)) {\n        dispatch({\n          type: \"UPDATE_TICKET_UNREAD_MESSAGES\",\n          payload: data.ticket,\n        });\n      }\n    });\n\n    socket.on(`company-${companyId}-contact`, (data) => {\n      if (data.action === \"update\") {\n        dispatch({\n          type: \"UPDATE_TICKET_CONTACT\",\n          payload: data.contact,\n        });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [status, showAll, user, selectedQueueIds, tags, users, profile, queues, socketManager]);\n\n  useEffect(() => {\n    if (typeof updateCount === \"function\") {\n      updateCount(ticketsList.length);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ticketsList]);\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  return (\n    <Paper className={classes.ticketsListWrapper} style={style}>\n      <Paper\n        square\n        name=\"closed\"\n        elevation={0}\n        className={classes.ticketsList}\n        onScroll={handleScroll}\n      >\n        <List style={{ paddingTop: 0 }}>\n          {ticketsList.length === 0 && !loading ? (\n            <div className={classes.noTicketsDiv}>\n              <span className={classes.noTicketsTitle}>\n                {i18n.t(\"ticketsList.noTicketsTitle\")}\n              </span>\n              <p className={classes.noTicketsText}>\n                {i18n.t(\"ticketsList.noTicketsMessage\")}\n              </p>\n            </div>\n          ) : (\n            <>\n              {ticketsList.map((ticket) => (\n                <TicketListItem ticket={ticket} key={ticket.id} />\n              ))}\n            </>\n          )}\n          {loading && <TicketsListSkeleton />}\n        </List>\n      </Paper>\n    </Paper>\n  );\n};\n\nexport default TicketsListCustom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}